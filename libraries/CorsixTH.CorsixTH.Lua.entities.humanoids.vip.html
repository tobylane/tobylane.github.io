<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
    <link rel="icon" href="../CorsixTH/CorsixTH.ico" type="image/png" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>CorsixTH</h1>

<img src="../data/logo.png" />

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Libraries</h2>
<ul class="nowrap">
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.announcer.html">CorsixTH.Lua.announcer</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.app.html">CorsixTH.Lua.app</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.audio.html">CorsixTH.Lua.audio</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.base_config.html">CorsixTH.Lua.base_config</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.calls_dispatcher.html">CorsixTH.Lua.calls_dispatcher</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.cheats.html">CorsixTH.Lua.cheats</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.adviser.html">CorsixTH.Lua.dialogs.adviser</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.bottom_panel.html">CorsixTH.Lua.dialogs.bottom_panel</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.build_room.html">CorsixTH.Lua.dialogs.build_room</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.confirm_dialog.html">CorsixTH.Lua.dialogs.confirm_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.edit_room.html">CorsixTH.Lua.dialogs.edit_room</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.html">CorsixTH.Lua.dialogs.fullscreen</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.annual_report.html">CorsixTH.Lua.dialogs.fullscreen.annual_report</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.bank_manager.html">CorsixTH.Lua.dialogs.fullscreen.bank_manager</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.drug_casebook.html">CorsixTH.Lua.dialogs.fullscreen.drug_casebook</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.fax.html">CorsixTH.Lua.dialogs.fullscreen.fax</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.graphs.html">CorsixTH.Lua.dialogs.fullscreen.graphs</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.hospital_policy.html">CorsixTH.Lua.dialogs.fullscreen.hospital_policy</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.progress_report.html">CorsixTH.Lua.dialogs.fullscreen.progress_report</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.staff_management.html">CorsixTH.Lua.dialogs.fullscreen.staff_management</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.fullscreen.town_map.html">CorsixTH.Lua.dialogs.fullscreen.town_map</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.furnish_corridor.html">CorsixTH.Lua.dialogs.furnish_corridor</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.information.html">CorsixTH.Lua.dialogs.information</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.machine_dialog.html">CorsixTH.Lua.dialogs.machine_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.menu.html">CorsixTH.Lua.dialogs.menu</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.message.html">CorsixTH.Lua.dialogs.message</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.patient.html">CorsixTH.Lua.dialogs.patient</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.place_objects.html">CorsixTH.Lua.dialogs.place_objects</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.place_staff.html">CorsixTH.Lua.dialogs.place_staff</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.queue_dialog.html">CorsixTH.Lua.dialogs.queue_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizable.html">CorsixTH.Lua.dialogs.resizable</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.calls_dispatcher.html">CorsixTH.Lua.dialogs.resizables.calls_dispatcher</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.cheats_dialog.html">CorsixTH.Lua.dialogs.resizables.cheats_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.customise.html">CorsixTH.Lua.dialogs.resizables.customise</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.directory_browser.html">CorsixTH.Lua.dialogs.resizables.directory_browser</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.dropdown.html">CorsixTH.Lua.dialogs.resizables.dropdown</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browser.html">CorsixTH.Lua.dialogs.resizables.file_browser</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browsers.choose_font.html">CorsixTH.Lua.dialogs.resizables.file_browsers.choose_font</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browsers.load_game.html">CorsixTH.Lua.dialogs.resizables.file_browsers.load_game</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browsers.load_map.html">CorsixTH.Lua.dialogs.resizables.file_browsers.load_map</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browsers.save_game.html">CorsixTH.Lua.dialogs.resizables.file_browsers.save_game</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.file_browsers.save_map.html">CorsixTH.Lua.dialogs.resizables.file_browsers.save_map</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.folder_settings.html">CorsixTH.Lua.dialogs.resizables.folder_settings</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.hotkey_assign.html">CorsixTH.Lua.dialogs.resizables.hotkey_assign</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.lua_console.html">CorsixTH.Lua.dialogs.resizables.lua_console</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.main_menu.html">CorsixTH.Lua.dialogs.resizables.main_menu</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.map_editor.html">CorsixTH.Lua.dialogs.resizables.map_editor</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.menu_list_dialog.html">CorsixTH.Lua.dialogs.resizables.menu_list_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.menu_list_dialogs.custom_campaign.html">CorsixTH.Lua.dialogs.resizables.menu_list_dialogs.custom_campaign</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.menu_list_dialogs.custom_game.html">CorsixTH.Lua.dialogs.resizables.menu_list_dialogs.custom_game</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.new_game.html">CorsixTH.Lua.dialogs.resizables.new_game</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.options.html">CorsixTH.Lua.dialogs.resizables.options</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.tip_of_the_day.html">CorsixTH.Lua.dialogs.resizables.tip_of_the_day</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.resizables.update.html">CorsixTH.Lua.dialogs.resizables.update</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.staff_dialog.html">CorsixTH.Lua.dialogs.staff_dialog</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.staff_rise.html">CorsixTH.Lua.dialogs.staff_rise</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.tree_ctrl.html">CorsixTH.Lua.dialogs.tree_ctrl</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.dialogs.watch.html">CorsixTH.Lua.dialogs.watch</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoid.html">CorsixTH.Lua.entities.humanoid</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.patient.html">CorsixTH.Lua.entities.humanoids.patient</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.staff.html">CorsixTH.Lua.entities.humanoids.staff</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.staff.doctor.html">CorsixTH.Lua.entities.humanoids.staff.doctor</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.staff.handyman.html">CorsixTH.Lua.entities.humanoids.staff.handyman</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.staff.nurse.html">CorsixTH.Lua.entities.humanoids.staff.nurse</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.humanoids.staff.receptionist.html">CorsixTH.Lua.entities.humanoids.staff.receptionist</a></li>
  <li><strong>CorsixTH.Lua.entities.humanoids.vip</strong></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.machine.html">CorsixTH.Lua.entities.machine</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entities.object.html">CorsixTH.Lua.entities.object</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.entity.html">CorsixTH.Lua.entity</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.filesystem.html">CorsixTH.Lua.filesystem</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.game_ui.html">CorsixTH.Lua.game_ui</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.graphics.html">CorsixTH.Lua.graphics</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.hospital.html">CorsixTH.Lua.hospital</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.hospitals.player_hospital.html">CorsixTH.Lua.hospitals.player_hospital</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_action.html">CorsixTH.Lua.humanoid_action</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.die.html">CorsixTH.Lua.humanoid_actions.die</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.idle.html">CorsixTH.Lua.humanoid_actions.idle</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.knock_door.html">CorsixTH.Lua.humanoid_actions.knock_door</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.multi_use_object.html">CorsixTH.Lua.humanoid_actions.multi_use_object</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.queue.html">CorsixTH.Lua.humanoid_actions.queue</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.seek_room.html">CorsixTH.Lua.humanoid_actions.seek_room</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.spawn.html">CorsixTH.Lua.humanoid_actions.spawn</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.use_object.html">CorsixTH.Lua.humanoid_actions.use_object</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.use_screen.html">CorsixTH.Lua.humanoid_actions.use_screen</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.humanoid_actions.walk.html">CorsixTH.Lua.humanoid_actions.walk</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.map.html">CorsixTH.Lua.map</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.movie_player.html">CorsixTH.Lua.movie_player</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.bench.html">CorsixTH.Lua.objects.bench</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.chair.html">CorsixTH.Lua.objects.chair</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.door.html">CorsixTH.Lua.objects.door</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.helicopter.html">CorsixTH.Lua.objects.helicopter</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.litter.html">CorsixTH.Lua.objects.litter</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.plant.html">CorsixTH.Lua.objects.plant</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.objects.reception_desk.html">CorsixTH.Lua.objects.reception_desk</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.persistance.html">CorsixTH.Lua.persistance</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.queue.html">CorsixTH.Lua.queue</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.research_department.html">CorsixTH.Lua.research_department</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.room.html">CorsixTH.Lua.room</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.rooms.operating_theatre.html">CorsixTH.Lua.rooms.operating_theatre</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.run_debugger.html">CorsixTH.Lua.run_debugger</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.staff_profile.html">CorsixTH.Lua.staff_profile</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.strict.html">CorsixTH.Lua.strict</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.string_extensions.html">CorsixTH.Lua.string_extensions</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.strings.html">CorsixTH.Lua.strings</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.ui.html">CorsixTH.Lua.ui</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.utility.html">CorsixTH.Lua.utility</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.window.html">CorsixTH.Lua.window</a></li>
  <li><a href="../libraries/CorsixTH.CorsixTH.Lua.world.html">CorsixTH.Lua.world</a></li>
</ul>
<h2>Manual</h2>
<ul class="nowrap">
  <li><a href="../manual/Readme.md.html">Readme</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>CorsixTH.CorsixTH.Lua.entities.humanoids.vip</code></h1>
<p>]]</p>
<p></p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Vip:Vip">Vip:Vip (...)</a></td>
	<td class="summary">A `Vip` who is in the hospital to evaluate the hospital and produce a report.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Vip:goHome">Vip:goHome ()</a></td>
	<td class="summary">VIP while on premises--]]function Vip:tickDay()
  -- for the vip
  if self.waiting then
    self.waiting = self.waiting - 1
    if self.waiting == 0 then
      if #self.world.rooms == 0 then
        -- No rooms have been built yet
        self:goHome()
      end
      self:getNextRoom()
      self.waiting = nil
    end
  end
  if not self.going_home then
    self.world:findObjectNear(self, "litter", 8, function(x, y)
      local litter = self.world:getObject(x, y, "litter")
      if not litter then
        return
      end
<p>      local alreadyFound = false
      for i=1, (self.num_vomit_noninducing + self.num_vomit_inducing) do
        if self.found_vomit[i] == litter then
          alreadyFound = true
          break
        end
      end
<p>      self.found_vomit[(self.num_vomit_noninducing + self.num_vomit_inducing + 1)] = litter
<p>      if not alreadyFound then
        if litter:anyLitter() then
          self.num_vomit_noninducing = self.num_vomit_noninducing + 1
        else
          self.num_vomit_inducing = self.num_vomit_inducing + 1
        end
      end
    end)
  end
  return Humanoid.tickDay(self)
end
<p>function Vip:getNextRoom()
  -- Find out the next room to visit.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "Vip:Vip"></a>
    <strong>Vip:Vip (...)</strong>
    </dt>
    <dd>
    A `Vip` who is in the hospital to evaluate the hospital and produce a report.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "Vip:goHome"></a>
    <strong>Vip:goHome ()</strong>
    </dt>
    <dd>
    VIP while on premises--]]function Vip:tickDay()
  -- for the vip
  if self.waiting then
    self.waiting = self.waiting - 1
    if self.waiting == 0 then
      if #self.world.rooms == 0 then
        -- No rooms have been built yet
        self:goHome()
      end
      self:getNextRoom()
      self.waiting = nil
    end
  end
  if not self.going_home then
    self.world:findObjectNear(self, "litter", 8, function(x, y)
      local litter = self.world:getObject(x, y, "litter")
      if not litter then
        return
      end
<p>      local alreadyFound = false
      for i=1, (self.num_vomit_noninducing + self.num_vomit_inducing) do
        if self.found_vomit[i] == litter then
          alreadyFound = true
          break
        end
      end
<p>      self.found_vomit[(self.num_vomit_noninducing + self.num_vomit_inducing + 1)] = litter
<p>      if not alreadyFound then
        if litter:anyLitter() then
          self.num_vomit_noninducing = self.num_vomit_noninducing + 1
        else
          self.num_vomit_inducing = self.num_vomit_inducing + 1
        end
      end
    end)
  end
  return Humanoid.tickDay(self)
end
<p>function Vip:getNextRoom()
  -- Find out the next room to visit.
  self.next_room_no, self.next_room = next(self.world.rooms, self.next_room_no)
  if self.next_room == nil then
    return self:setNextAction(VipGoToNextRoomAction())
  end
  -- Always visit the first room.
  if self.num_visited_rooms > 0 then
    local roll_to_visit = math.random(0, self.room_visit_chance)
    -- Run a loop until roll_to_visit passes, or we hit a room the VIP must visit
    while roll_to_visit ~= self.room_visit_chance and not self.next_room.room_info.vip_must_visit do
      self.next_room_no, self.next_room = next(self.world.rooms, self.next_room_no) -- get new room
      if self.next_room == nil then
        -- We ran out of rooms, time to leave
        break
      end
      roll_to_visit = math.random(0, self.room_visit_chance)
    end
  end
  -- Make sure room is active. If not, always visit the next available room.
  while self.next_room and not self.next_room.is_active do
    self.next_room_no, self.next_room = next(self.world.rooms, self.next_room_no)
  end
  self:setNextAction(VipGoToNextRoomAction())
end
<p>-- display the VIP name in the info box
function Vip:updateDynamicInfo(action_string) -- luacheck: ignore 212 keep args from parent class
  self:setDynamicInfo('text', {self.name})
end








</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc TESTING</a></i>
<i style="float:right;">Last updated 2015-01-01 12:00:00 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
